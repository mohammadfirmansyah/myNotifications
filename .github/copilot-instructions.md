# Copilot Instructions for myNotifications

## Project Overview
This is a React Native notification app built with **Expo SDK 54** and React Native 0.81.5, targeting Android with **React Native New Architecture enabled**. The app integrates Firebase Cloud Messaging and Expo Notifications for push notification functionality.

## Architecture

### Hybrid Expo + Native Setup
- **Entry Point**: `index.js` uses `registerRootComponent` from Expo, not traditional `AppRegistry.registerComponent`
- **Main Component**: Registered as `'main'` (see `MainActivity.kt` line 26)
- **Metro Entry**: JS bundle entry is `.expo/.virtual-metro-entry` (auto-generated by Expo, not in repo)
- **Build System**: Expo CLI handles bundling via `export:embed` command (see `android/app/build.gradle` line 20)

### New Architecture (Fabric) Enabled
- `app.json` has `"newArchEnabled": true`
- Kotlin native code uses `DefaultNewArchitectureEntryPoint.fabricEnabled`
- Build config sets `BuildConfig.IS_NEW_ARCHITECTURE_ENABLED`
- This affects how native modules and views are instantiated

### Package Structure
```
com.mohammadfirmansyah.myNotifications
├── MainActivity.kt      - Custom back button handling for Android R compatibility
├── MainApplication.kt   - Expo lifecycle integration + ReleaseLevel configuration
└── AndroidManifest.xml  - Standard permissions + edge-to-edge UI enabled
```

## Key Dependencies & Integrations

### Firebase Setup (Partially Configured)
- `@react-native-firebase/app` and `@react-native-firebase/messaging` are in `package.json`
- **Missing**: No `google-services.json` or plugin reference found in Gradle files
- **Action Required**: When implementing FCM, add `google-services` plugin to `android/app/build.gradle` and place config file in `android/app/`

### Expo Modules in Use
- `expo-notifications` (v0.32.12) - Primary notification API
- `expo-status-bar` - Status bar styling
- Autolinking configured via `PackageList` in `MainApplication.kt`

## Development Workflows

### Starting Development Server
```bash
npm start          # Expo dev server with QR code
npm run android    # Build and run on Android device/emulator
```

### Building Android
- **Debug**: Uses `android/app/debug.keystore` (committed to repo)
- **Release**: Currently using debug keystore (INSECURE - see `android/app/build.gradle` line 119)
- **Optimization**: R8 minification controlled by `android.enableMinifyInReleaseBuilds` gradle property (default: false)

### Gradle Configuration
Root-level versions defined in `android/build.gradle`:
- SDK versions, NDK version, build tools set via `rootProject.ext.*`
- Maven repos include JitPack for third-party dependencies

## Project-Specific Conventions

### Back Button Behavior (Android)
`MainActivity.kt` overrides `invokeDefaultOnBackPressed()` to move tasks to background instead of finishing activity on Android R and below (lines 46-50). This aligns with Android 12+ behavior.

### Theme Management
Activity theme is set to `Theme.App.SplashScreen` in manifest, then swapped to `AppTheme` in `MainActivity.onCreate()` before super call. This pattern is required for `expo-splash-screen` to work correctly.

### Package Naming
- Package: `com.mohammadfirmansyah.myNotifications`
- Application ID matches package name
- Namespace set in `android/app/build.gradle` (line 90)

## Common Pitfalls

1. **React 19 Compatibility**: Using React 19.1.0 - verify third-party libraries support this version
2. **Release Signing**: Production builds need proper keystore configuration (currently using debug keystore)
3. **Firebase Config**: FCM dependencies present but not fully wired - missing `google-services.json`
4. **Metro Config**: Expo handles Metro configuration - don't add custom `metro.config.js` without understanding Expo's virtual entry point
5. **New Architecture**: Some older React Native libraries may not support Fabric - check compatibility before adding dependencies

## Code Style & Documentation Guidelines

### Comment Style Requirements
When writing code, use tutorial-style comments that resemble professional teaching:
- **Educational Approach**: Write as an expert instructor explaining concepts scientifically yet concisely
- **Language**: All comments must be in English, friendly and communicative
- **Clarity**: Explain the purpose and benefits of each code section clearly
- **Brevity**: Keep comments short and to the point - avoid over-explaining

### Example Comment Pattern
```javascript
// Configure notification listener to handle incoming messages
// This ensures we can display alerts even when app is in background
Notifications.addNotificationReceivedListener(handleNotification);

// Set channel importance level for Android 8+
// High importance enables heads-up notifications with sound
if (Platform.OS === 'android') {
  Notifications.setNotificationChannelAsync('default', {
    importance: Notifications.AndroidImportance.MAX,
  });
}
```

### Code Formatting
- **Line Length**: Break long lines for readability (max ~80-100 characters)
- **Consistency**: Follow existing patterns in the codebase
- **Response Language**: Always respond in Bahasa Indonesia for explanations
- **Avoid**: Words like "sempurna", "ideal", "perfect" - use practical, straightforward language

## File Modification Guidelines

- **Native Code**: Kotlin files follow standard Android/Expo patterns - maintain Expo lifecycle dispatchers when modifying `MainApplication.kt`
- **Gradle Scripts**: Use Gradle properties pattern (e.g., `findProperty('android.enableX')`) for optional build configurations
- **Manifest**: Keep `android:enableOnBackInvokedCallback="false"` unless targeting Android 13+ exclusively
- **JS Entry**: Never modify `index.js` - Expo manages the root component registration
